<header id="navbar-wrapper" aria-label="Main Navigation">
  <nav id="main-nav" class="navbar navbar-expand-sm">
    <div class="container-fluid">

      <!-- Navbar Brand -->
      <a class="navbar-brand" href="{{ '/' | relative_url }}">
        <span>~/</span>{{ site.title }}<span>/</span>
      </a>

      <!-- Navbar Toggler for Mobile -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" >
        <i class="fas fa-bars fa-fw"></i>
      </button>

      <!-- Navbar Links -->
      <div id="navbarNav" class="collapse navbar-collapse">
        <ul class="navbar-nav mx-auto mb-2 mb-sm-0">
          <!-- Home Link (default) -->
          <li class="nav-item{% if page.layout == 'home' %}{{ " active" }}{% endif %}">
            <a class="nav-link" href="{{ '/' | relative_url }}">
              <i class="fa-fw fas fa-home"></i>
              <span>{{ site.data.site_text.tabs.home | downcase }}/</span>
            </a>
          </li>

          <!-- Iter navbar tabs -->
          {% for tab in site.tabs %}
          <li class="nav-item{% if tab.url == page.url %}{{ " active" }}{% endif %}">
              <a class="nav-link" href="{{ tab.url | relative_url }}">
                <i class="fa-fw {{ tab.icon }}"></i>
                <span>{{ site.data.site_text.tabs[tab.url] | default: tab.title | downcase }}/</span>
              </a>
            </li>
          {% endfor %}
        </ul>

        <!-- Social Icons and Theme Toggle on the Right -->
        <ul class="nav nav-pills nav-social d-flex flex-row align-items-center">
          {% for entry in site.data.contact %}
            {%- assign url = null -%}

            {% case entry.type %}
              {% when 'github', 'twitter' %}
                {%- unless site[entry.type].username -%}
                  {%- continue -%}
                {%- endunless -%}
                {%- capture url -%}
                  https://{{ entry.type }}.com/{{ site[entry.type].username }}
                {%- endcapture -%}
              {% when 'email' %}
                {%- unless site.social.email -%}
                  {%- continue -%}
                {%- endunless -%}
                {%- assign email = site.social.email | split: '@' -%}
                {%- capture url -%}
                  javascript:location.href = 'mailto:' + ['{{ email[0] }}','{{ email[1] }}'].join('@')
                {%- endcapture -%}
              {% when 'rss' %}
                {% assign url = '/feed.xml' | relative_url %}
              {% else %}
                {% assign url = entry.url %}
            {% endcase %}

            {% if url %}
              <a
                href="{{ url }}"
                aria-label="{{ entry.type }}"
                {% assign link_types = '' %}

                {% unless entry.noblank %}
                  target="_blank"
                  {% assign link_types = 'noopener noreferrer' %}
                {% endunless %}

                {% if entry.type == 'mastodon' %}
                  {% assign link_types = link_types | append: ' me' | strip %}
                {% endif %}

                {% unless link_types == empty %}
                  rel="{{ link_types }}"
                {% endunless %}
              >
                <i class="{{ entry.icon }}"></i>
              </a>
            {% endif %}
          {% endfor %}

          {% unless site.theme_mode %}
            {% if site.data.contact.size > 0 %}
              <span class="icon-border"></span>
            {% endif %}
            <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
              <i class="fas fa-adjust"></i>
            </button>
          {% endunless %}
        </ul>
      </div>
    </div>
  </nav>
</header>

